<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cek Status Eligible 2026</title>
    <style>
        :root {
            --primary-color: #1a237e;
            --success-color: #2e7d32;
            --danger-color: #d32f2f;
            --bg-color: #f4f7f9;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 550px;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 25px;
        }

        .logo-sekolah {
            width: 120px;
            margin: 10px auto;
            display: block;
        }

        input[type="text"] {
            width: 100%;
            padding: 14px;
            margin-bottom: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            box-sizing: border-box;
            text-align: center;
        }

        button {
            width: 100%;
            padding: 14px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
        }

        #result-area {
            margin-top: 30px;
            display: none;
        }

        .status-card {
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            color: white;
            margin-bottom: 20px;
        }

        .eligible-bg {
            background-color: var(--success-color);
        }

        .not-eligible-bg {
            background-color: var(--danger-color);
        }

        /* Tabel Nilai */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: #f9f9f9;
            border-radius: 8px;
            overflow: hidden;
        }

        th,
        td {
            padding: 12px;
            border: 1px solid #eee;
            text-align: center;
            font-size: 14px;
        }

        th {
            background: #1a237e;
            color: white;
        }

        .total-row {
            background: #e8eaf6;
            font-weight: bold;
        }

        .info-siswa {
            margin-bottom: 15px;
            font-size: 14px;
            line-height: 1.6;
        }

        #loader {
            display: none;
            text-align: center;
            margin: 20px;
            color: var(--primary-color);
        }

        .keterangan {
            margin-top: 20px;
            padding: 15px;
            border-radius: 12px;
            font-size: 14px;
            line-height: 1.6;
        }

        .keterangan.eligible {
            background: #e8f5e9;
            color: #1b5e20;
            border-left: 5px solid #2e7d32;
        }

        .keterangan.not-eligible {
            background: #ffebee;
            color: #b71c1c;
            border-left: 5px solid #d32f2f;
        }
    </style>
</head>

<body>

    <div class="container">
        <div class="header">
            <img src="https://dwisma.id/img/Logo%20Dwisma.png" alt="Logo Sekolah" class="logo-sekolah">
            <h3>Pengumuman Eligible Tahap 1</h3>
            <p>SNBP 2026</p>
        </div>

        <div id="countdownBox" style="
    text-align:center;
    padding:20px;
    background:#fff3e0;
    border-radius:15px;
    margin-bottom:20px;
    border-left:5px solid #fb8c00;
">
            <h4 style="margin:0 0 10px;">‚è≥ Pengumuman Akan Dibuka Dalam</h4>
            <div id="countdown" style="
        font-size:20px;
        font-weight:700;
        color:#e65100;
    "></div>
            <p style="font-size:13px; margin-top:10px;">
                Pengumuman dapat diakses pada<br>
                <strong>13 Januari 2026 pukul 09.00 WIB</strong>
            </p>
        </div>


        <form id="checkerForm" style="display:none;">
            <input type="text" id="nisnInput" placeholder="Masukkan NISN" required>
            <button type="submit">Lihat Hasil</button>
        </form>

        <div id="loader">Tunggu Sebentar...</div>

        <div id="result-area">
            <div id="updateTime" style="font-size:12px; opacity:0.7;"></div>
            <div id="statusCard" class="status-card">
                <p style="margin:0; font-size: 12px; opacity:0.8;">HASIL SELEKSI</p>
                <p id="statusOutput" style="margin:5px 0; font-size: 24px; font-weight: 800;"></p>
            </div>

            <div class="info-siswa">
                <strong>Nama:</strong> <span id="nameOutput"></span><br>
                <strong>Kelas:</strong> <span id="classOutput"></span><br>
                <strong>Peringkat:</strong> <span id="rankOutput"></span>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>S1</th>
                        <th>S2</th>
                        <th>S3</th>
                        <th>S4</th>
                        <th>S5</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td id="s1"></td>
                        <td id="s2"></td>
                        <td id="s3"></td>
                        <td id="s4"></td>
                        <td id="s5"></td>
                    </tr>
                    <tr class="total-row">
                        <td colspan="4">TOTAL NILAI</td>
                        <td id="totalScore"></td>
                    </tr>
                </tbody>
            </table>
            <div id="keteranganArea" class="keterangan" style="display:none;"></div>

            <div id="snpmbInfo" style="
    margin-top:15px;
    padding:12px;
    background:#e3f2fd;
    border-left:5px solid #1565c0;
    border-radius:10px;
    font-size:14px;
    line-height:1.6;
">
                <strong>üìå Tindak Lanjut Wajib</strong><br>
                Baik siswa <strong>eligible maupun tidak eligible</strong>,
                wajib melakukan <strong>pendaftaran akun SNPMB</strong>
                melalui laman resmi:<br>
                üëâ <a href="https://portal.snpmb.id/" target="_blank" style="font-weight:600;">
                    https://portal.snpmb.id/
                </a>
            </div>

        </div>
    </div>

    <script>
        /* ===============================
           KONFIGURASI
        =============================== */
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyHKAE2-_J3yOc6J-7ixByWKqeW9edz-SzUScF3LmNCDpWGUA74S3oJ0na6hocipGW3/exec";
        const OPEN_TIME = new Date("2026-01-13T09:00:00+07:00").getTime();
        // const OPEN_TIME = new Date().getTime(); // langsung buka


        /* ===============================
           COUNTDOWN & LOCK PENGUMUMAN
        =============================== */
        const countdownEl = document.getElementById("countdown");
        const countdownBox = document.getElementById("countdownBox");
        const formEl = document.getElementById("checkerForm");

        const timer = setInterval(() => {
            const now = new Date().getTime();
            const distance = OPEN_TIME - now;

            if (distance <= 0) {
                clearInterval(timer);
                countdownBox.style.display = "none";
                formEl.style.display = "block";
                return;
            }

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            countdownEl.innerHTML =
                `${days} hari ${hours} jam ${minutes} menit ${seconds} detik`;
        }, 1000);

        /* ===============================
           CEK ELIGIBLE
        =============================== */
        document.getElementById('checkerForm').addEventListener('submit', e => {
            e.preventDefault();

            const nisn = document.getElementById('nisnInput').value;
            const loader = document.getElementById('loader');
            const resultArea = document.getElementById('result-area');

            loader.style.display = 'block';
            resultArea.style.display = 'none';

            fetch(`${SCRIPT_URL}?nis=${nisn}`)
                .then(res => res.json())
                .then(data => {
                    loader.style.display = 'none';

                    if (data.status === "success") {

                        /* === DATA SISWA === */
                        document.getElementById('statusOutput').innerText = data.nilai.Keterangan;
                        document.getElementById('nameOutput').innerText = data.nama;
                        document.getElementById('classOutput').innerText = data.nilai.Kelas;
                        document.getElementById('rankOutput').innerText = data.nilai.Peringkat;

                        /* === TABEL NILAI === */
                        document.getElementById('s1').innerText = data.nilai.S1;
                        document.getElementById('s2').innerText = data.nilai.S2;
                        document.getElementById('s3').innerText = data.nilai.S3;
                        document.getElementById('s4').innerText = data.nilai.S4;
                        document.getElementById('s5').innerText = data.nilai.S5;
                        document.getElementById('totalScore').innerText = data.nilai.Total;

                        /* === STATUS & KETERANGAN === */
                        const card = document.getElementById('statusCard');
                        const ket = data.nilai.Keterangan.toLowerCase();
                        const ketArea = document.getElementById('keteranganArea');

                        if (ket.includes("tidak") || ket.includes("not")) {
                            card.className = "status-card not-eligible-bg";
                            ketArea.className = "keterangan not-eligible";
                            ketArea.innerHTML = `
                            <strong>üìå Informasi:</strong><br>
                            Anda <strong>belum termasuk ELIGIBLE SNBP tahap 1</strong>.<br>
                            Silakan <strong>menunggu pengumuman tahap 2 pada Kamis, 15 Januari 2026</strong>
                            dan tetap mengikuti informasi resmi dari sekolah.<br><br>
                            <em>Tetap semangat dan persiapkan diri untuk jalur seleksi berikutnya.</em>
                        `;
                        } else {
                            card.className = "status-card eligible-bg";
                            ketArea.className = "keterangan eligible";
                            ketArea.innerHTML = `
                            <strong>üìå Informasi Penting:</strong><br>
                            Anda <strong>dinyatakan ELIGIBLE SNBP 2026</strong>.<br>
                            Wajib melakukan <strong>konfirmasi ke Guru BK</strong>
                            paling lambat <strong>Kamis, 15 Januari 2026</strong>.
                        `;
                        }

                        ketArea.style.display = "block";

                        /* === TIMESTAMP === */
                        document.getElementById("updateTime").innerText =
                            "Terakhir diperbarui: " + new Date().toLocaleString("id-ID");

                        resultArea.style.display = 'block';

                    } else {
                        alert("NISN tidak ditemukan!");
                    }
                })
                .catch(() => {
                    loader.style.display = 'none';
                    alert("Terjadi kesalahan. Silakan coba lagi.");
                });
        });
    </script>

</body>

</html>